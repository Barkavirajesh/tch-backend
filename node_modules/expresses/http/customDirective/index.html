<!DOCTYPE html>
<html ng-app="myApp">

<head>
    <meta charset="UTF-8">
    <title>AngularJS Login Directive</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
</head>

<body ng-controller="MainCtrl">

    <h2>Custom Login Directive</h2>

    <login-form on-login="login(user)"></login-form>

    <script>
        var app = angular.module('myApp', []);

        app.controller('MainCtrl', function ($scope) {
            $scope.login = function (user) {
                alert('Welcome, ' + user.username + '!');
            };
        });

        app.directive('loginForm', function () {
            return {
                restrict: 'E',
                scope: {
                    onLogin: '&'
                },
                template: `
          <form ng-submit="submitForm()" novalidate>
            <label>Username:</label>
            <input type="text" ng-model="user.username" required />

            <label>Password:</label>
            <input type="password" ng-model="user.password" required />

            <button type="submit">Login</button>
          </form>
        `,
                link: function (scope) {
                    scope.user = {};

                    scope.submitForm = function () {
                        if (scope.user.username && scope.user.password) {
                            scope.onLogin({ user: scope.user });
                        } else {
                            alert('Please enter both username and password.');
                        }
                    };
                }
            };
        });
    </script>

</body>

</html>