<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>My App</title>
        <script src="/angular-1.8.2/angular.js"></script>
        <script src="/module/app_module.js"></script>
    </head>

    <body ng-app="myApp">
        <div ng-controller="myctrl">
            <center>
                <div ng-if="!isLogin">
                    <h2>Login</h2>
                    <form ng-submit="LoginUser()">
                        Email: <input type="email" ng-model="login.email" placeholder="Email" required><br><br>
                        Password: <input type="password" ng-model="login.password" placeholder="Password"
                            required><br><br>
                        <input type="submit" value="Login">
                    </form>
                </div>

                <div ng-if="isLogin">
                    <h3>Welcome, {{ user.name }}</h3>


                    <h4>Email: {{user.email}}</h4>
                    <h4>Age: {{user.age}}</h4>
                    <h4>Marks: {{user.marks}}</h4>


                    <div>
                        <div ng-if="!isUpdate">
                            <h2>Add User</h2>
                        </div>
                        <div ng-if="isUpdate">
                            <h2>Edit User</h2>
                        </div>
                        <form>
                            Name: <input type="text" ng-model="newuser.name" placeholder="Name" required><br><br>
                            Age: <input type="number" ng-model="newuser.age" placeholder="Age" required><br><br>
                            Marks: <input type="number" ng-model="newuser.marks" placeholder="Marks" required><br><br>
                            Email: <input type="email" ng-model="newuser.email" placeholder="Email" required><br><br>
                            Password: <input type="password" ng-model="newuser.password" placeholder="Password"
                                required><br><br>
                            <div ng-if="!isUpdate">
                                <input type="submit" ng-click="addUser()" value="Add">
                            </div>
                            <div ng-if="isUpdate">
                                <input type="submit" ng-click="updateUser()" value="Edit">
                            </div>

                        </form>
                    </div>

                    <br>
                    <br>



                    <input type="text" ng-model="searchText" placeholder="Search by name or email">

                    <select ng-model="marksFilter">
                        <option value="">All Marks</option>
                        <option value="marks">Asc</option>
                        <option value="-marks">Desc</option>


                    </select>


                    <br>
                    <br>
                    <table border="1" cellpadding="10" cellspacing="0">
                        <tr>
                            <th>Sr</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Age</th>
                            <th>Marks</th>
                            <th colspan="2">Actions</th>
                        </tr>

                        <tr ng-repeat="u in users | filter:searchText | orderBy:marksFilter | limitTo:2:num">
                            <td>{{$index+1}}</td>
                            <td>{{u.name}}</td>
                            <td>{{u.email}}</td>
                            <td>{{u.age}}</td>
                            <td>{{u.marks}}</td>

                            <td><button ng-disabled="u._id==user._id" type="submit"
                                    ng-click="deleteUser(u._id)">Delete</button></td>
                            <td><button type="submit" ng-click="update(u)">Edit</button></td>
                        </tr>

                    </table>

                    <br>
                    <br>
                    <button ng-disabled="num<=0" ng-click="change('-')">Back</button>

                    <button ng-disabled="num>users.length-3" ng-click="change('+')">Next</button>
                    <br>
                    <br>

                </div>

            </center>
        </div>
    </body>

</html>